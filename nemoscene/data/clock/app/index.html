<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        div {
            line-height: 1.1;
        }
    </style>
</head>
<body onload="clock()">
<div style="width: 100%; height: 100%;" id="time_text"></div>
<div style="width: 100%; height: 100%;" id="date_text"></div>
</body>
<script src="http://localhost:1337/bundle/silvertree/lib/lib.js"></script>
<script src="http://localhost:1337/bundle/clock/lib/fittext.js"></script>
<script>
    Silvertree.initFramework("clock");

    let showSeconds = Silvertree.getConfigurationValue("clock", "show_seconds");
    let showDate = Silvertree.getConfigurationValue("clock", "show_date");
    let timeFontWeight = Silvertree.getConfigurationValue("clock", "time_font_weight");
    let dateFontWeight = Silvertree.getConfigurationValue("clock", "date_font_weight");

    function clock() {
        window.fitText(document.getElementById('time_text'), 0.9);
        window.fitText(document.getElementById('date_text'), 3.5);
        const today = new Date();
        let h = today.getHours();
        let m = today.getMinutes();
        let s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        let time = h + ":" + m;
        if (showSeconds) time += ":" + s;
        document.getElementById('time_text').innerHTML = time;
        document.getElementById('time_text').style.fontWeight = timeFontWeight;

        if (showDate) {
            document.getElementById('date_text').innerHTML = `${today.toLocaleDateString("en-US", {weekday: "short"})}, ${today.toLocaleDateString("en-US", {month: "short"})} ${today.toLocaleDateString("en-US", {day: "numeric"})}`;
            document.getElementById('date_text').style.fontWeight = dateFontWeight;
        }

        setTimeout(clock, 1000);
    }

    function checkTime(i) {
        if (i < 10) {
            i = "0" + i
        }
        return i;
    }

</script>
</html>